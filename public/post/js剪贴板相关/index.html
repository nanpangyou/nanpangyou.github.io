<!DOCTYPE html>






























<html
  class="not-ready text-sm lg:text-base"
  style="--bg: #f1efe1"
  lang="en-us"
>
  <head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1, shrink-to-fit=no"
  />

  
  <title>JS剪贴板相关 - 男胖友de部落格</title>

  
  <meta name="theme-color" />
  
  <meta name="description" content="JS 剪贴板相关的内容 这两天做了一个需求，是通过 js 获取剪贴板中的字符串，对用户复制不同长度的字符串进行分类处理。
由于自己之前从来都没有关注过复制事件 paste ,于是就去网上找了找相关的资料，记录如下：
JS 是可以拿到用户所输入的内容的 paste 事件不一定需要绑定在 input 元素中，可以绑定在任意元素中，当用户鼠标在该元素上或者该元素处于 focus 状态，绑定的 paste 事件就会在复制的时候执行。
事件对象  if (window.clipboardData &amp;&amp; window.clipboardData.getData) { // IE pastedText = window.clipboardData.getData(&#34;Text&#34;); } else { //e.clipboardData.getData(&#39;text/plain&#39;); pastedText = e.originalEvent.clipboardData.getData(&#34;Text&#34;); } 粘贴事件为你提供了一个 clipboardData 对象, 它实际上是一个 DataTransfer 类型的对象, DataTransfer 是拖动产生的一个对象，但实际上粘贴事件也是它。
clipboardData 属性介绍
   属性 类型 说明     dropEffect String 默认是 none   effectAllowed String 默认是 uninitialized   files FileList 粘贴操作为空 List   items DataTransferItemList 剪切板中的各项数据   types Array 剪切板中的数据类型 该属性在 Safari 下比较混乱    items 介绍 items 是一个 DataTransferItemList 对象，自然里面都是 DataTransferItem 类型的数据了。" />
  <meta
    name="author"
    content="nanpangyou"
  />
  

  
  
  
  
  
  
  <link rel="preload stylesheet" as="style" href="https://nanpangyou.github.io/main.min.css" />

  

  
     
  <link rel="preload" as="image" href="https://nanpangyou.github.io/theme.png" />

  
  
  
  <link rel="preload" as="image" href="https://avatars.githubusercontent.com/u/11482364?v=4" />
  
  

  
  <link rel="preload" as="image" href="https://nanpangyou.github.io/github.svg" />
  

  
  <link rel="icon" href="https://nanpangyou.github.io/favicon.ico" />
  <link rel="apple-touch-icon" href="https://nanpangyou.github.io/apple-touch-icon.png" />

  
  <meta name="generator" content="Hugo 0.93.3" />

  
  

  
  
  
  
  
  
  
  
  
  <meta property="og:title" content="JS剪贴板相关" />
<meta property="og:description" content="JS 剪贴板相关的内容 这两天做了一个需求，是通过 js 获取剪贴板中的字符串，对用户复制不同长度的字符串进行分类处理。
由于自己之前从来都没有关注过复制事件 paste ,于是就去网上找了找相关的资料，记录如下：
JS 是可以拿到用户所输入的内容的 paste 事件不一定需要绑定在 input 元素中，可以绑定在任意元素中，当用户鼠标在该元素上或者该元素处于 focus 状态，绑定的 paste 事件就会在复制的时候执行。
事件对象  if (window.clipboardData &amp;&amp; window.clipboardData.getData) { // IE pastedText = window.clipboardData.getData(&#34;Text&#34;); } else { //e.clipboardData.getData(&#39;text/plain&#39;); pastedText = e.originalEvent.clipboardData.getData(&#34;Text&#34;); } 粘贴事件为你提供了一个 clipboardData 对象, 它实际上是一个 DataTransfer 类型的对象, DataTransfer 是拖动产生的一个对象，但实际上粘贴事件也是它。
clipboardData 属性介绍
   属性 类型 说明     dropEffect String 默认是 none   effectAllowed String 默认是 uninitialized   files FileList 粘贴操作为空 List   items DataTransferItemList 剪切板中的各项数据   types Array 剪切板中的数据类型 该属性在 Safari 下比较混乱    items 介绍 items 是一个 DataTransferItemList 对象，自然里面都是 DataTransferItem 类型的数据了。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://nanpangyou.github.io/post/js%E5%89%AA%E8%B4%B4%E6%9D%BF%E7%9B%B8%E5%85%B3/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2019-04-19T16:47:55+00:00" />
<meta property="article:modified_time" content="2019-04-19T16:47:55+00:00" />


  
  <meta itemprop="name" content="JS剪贴板相关">
<meta itemprop="description" content="JS 剪贴板相关的内容 这两天做了一个需求，是通过 js 获取剪贴板中的字符串，对用户复制不同长度的字符串进行分类处理。
由于自己之前从来都没有关注过复制事件 paste ,于是就去网上找了找相关的资料，记录如下：
JS 是可以拿到用户所输入的内容的 paste 事件不一定需要绑定在 input 元素中，可以绑定在任意元素中，当用户鼠标在该元素上或者该元素处于 focus 状态，绑定的 paste 事件就会在复制的时候执行。
事件对象  if (window.clipboardData &amp;&amp; window.clipboardData.getData) { // IE pastedText = window.clipboardData.getData(&#34;Text&#34;); } else { //e.clipboardData.getData(&#39;text/plain&#39;); pastedText = e.originalEvent.clipboardData.getData(&#34;Text&#34;); } 粘贴事件为你提供了一个 clipboardData 对象, 它实际上是一个 DataTransfer 类型的对象, DataTransfer 是拖动产生的一个对象，但实际上粘贴事件也是它。
clipboardData 属性介绍
   属性 类型 说明     dropEffect String 默认是 none   effectAllowed String 默认是 uninitialized   files FileList 粘贴操作为空 List   items DataTransferItemList 剪切板中的各项数据   types Array 剪切板中的数据类型 该属性在 Safari 下比较混乱    items 介绍 items 是一个 DataTransferItemList 对象，自然里面都是 DataTransferItem 类型的数据了。"><meta itemprop="datePublished" content="2019-04-19T16:47:55+00:00" />
<meta itemprop="dateModified" content="2019-04-19T16:47:55+00:00" />
<meta itemprop="wordCount" content="196">
<meta itemprop="keywords" content="note," />
  
  <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="JS剪贴板相关"/>
<meta name="twitter:description" content="JS 剪贴板相关的内容 这两天做了一个需求，是通过 js 获取剪贴板中的字符串，对用户复制不同长度的字符串进行分类处理。
由于自己之前从来都没有关注过复制事件 paste ,于是就去网上找了找相关的资料，记录如下：
JS 是可以拿到用户所输入的内容的 paste 事件不一定需要绑定在 input 元素中，可以绑定在任意元素中，当用户鼠标在该元素上或者该元素处于 focus 状态，绑定的 paste 事件就会在复制的时候执行。
事件对象  if (window.clipboardData &amp;&amp; window.clipboardData.getData) { // IE pastedText = window.clipboardData.getData(&#34;Text&#34;); } else { //e.clipboardData.getData(&#39;text/plain&#39;); pastedText = e.originalEvent.clipboardData.getData(&#34;Text&#34;); } 粘贴事件为你提供了一个 clipboardData 对象, 它实际上是一个 DataTransfer 类型的对象, DataTransfer 是拖动产生的一个对象，但实际上粘贴事件也是它。
clipboardData 属性介绍
   属性 类型 说明     dropEffect String 默认是 none   effectAllowed String 默认是 uninitialized   files FileList 粘贴操作为空 List   items DataTransferItemList 剪切板中的各项数据   types Array 剪切板中的数据类型 该属性在 Safari 下比较混乱    items 介绍 items 是一个 DataTransferItemList 对象，自然里面都是 DataTransferItem 类型的数据了。"/>

  
  
</head>

  <body class="text-black duration-200 ease-out dark:text-white">
    <header class="mx-auto flex h-[5rem] max-w-3xl px-8 lg:justify-center">
  <div class="relative z-50 mr-auto flex items-center">
    <a
      class="-translate-x-[1px] -translate-y-0.5 text-3xl font-bold"
      href="https://nanpangyou.github.io/"
      >男胖友de部落格</a
    >
    <a
      class="btn-dark ml-6 h-6 w-6 shrink-0 cursor-pointer [background:url(./theme.svg)_left_center/cover_no-repeat] dark:invert dark:[background-position:right]"
    ></a>
  </div>

  <a
    class="btn-menu relative z-50 -mr-8 flex h-[5rem] w-[5rem] shrink-0 cursor-pointer flex-col items-center justify-center gap-2.5 lg:hidden"
  ></a>

  
  <script>
    
    const htmlClass = document.documentElement.classList;
    setTimeout(() => {
      htmlClass.remove('not-ready');
    }, 10);

    
    const btnMenu = document.querySelector('.btn-menu');
    btnMenu.addEventListener('click', () => {
      htmlClass.toggle('open');
    });

    
    const metaTheme = document.querySelector('meta[name="theme-color"]');
    const lightBg = `"#f1efe1"`.replace(/"/g, '');
    const setDark = (isDark) => {
      metaTheme.setAttribute('content', isDark ? '#000' : lightBg);
      htmlClass[isDark ? 'add' : 'remove']('dark');
      localStorage.setItem('dark', isDark);
    };

    
    const darkScheme = window.matchMedia('(prefers-color-scheme: dark)');
    if (htmlClass.contains('dark')) {
      setDark(true);
    } else {
      const darkVal = localStorage.getItem('dark');
      setDark(darkVal ? darkVal === 'true' : darkScheme.matches);
    }

    
    darkScheme.addEventListener('change', (event) => {
      setDark(event.matches);
    });

    
    const btnDark = document.querySelector('.btn-dark');
    btnDark.addEventListener('click', () => {
      setDark(localStorage.getItem('dark') !== 'true');
    });
  </script>

  <div
    class="nav-wrapper fixed inset-x-0 top-full z-40 flex h-full select-none flex-col justify-center pb-16 duration-200 dark:bg-black lg:static lg:h-auto lg:flex-row lg:!bg-transparent lg:pb-0 lg:transition-none"
  >
    
    

    
    <nav
      class="mt-12 flex justify-center space-x-10 dark:invert lg:mt-0 lg:ml-12 lg:items-center lg:space-x-6"
    >
      
      <a
        class="h-8 w-8 [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6"
        style="--url: url(./github.svg)"
        href=" https://github.com/https://github.com/nanpangyou "
        target="_blank"
      ></a>
      
    </nav>
    
  </div>
</header>


    <main
      class="prose prose-neutral relative mx-auto min-h-[calc(100%-10rem)] max-w-3xl px-8 pt-20 pb-32 dark:prose-invert"
    >
      

<article>
  <header class="mb-20">
    <h1 class="!my-0 pb-2.5">JS剪贴板相关</h1>

    
    <div class="text-sm opacity-60">
      
      <time>Apr 19, 2019</time>
      
      
      <span class="mx-1">&middot;</span>
      <span>nanpangyou</span>
      
    </div>
    
  </header>

  <section><h1 id="js-剪贴板相关的内容">JS 剪贴板相关的内容</h1>
<p>这两天做了一个需求，是通过 js 获取剪贴板中的字符串，对用户复制不同长度的字符串进行分类处理。</p>
<p>由于自己之前从来都没有关注过复制事件 <code>paste</code> ,于是就去网上找了找相关的资料，记录如下：</p>
<h2 id="js-是可以拿到用户所输入的内容的">JS 是可以拿到用户所输入的内容的</h2>
<p><code>paste</code> 事件不一定需要绑定在 <code>input</code> 元素中，可以绑定在任意元素中，当用户鼠标在该元素上或者该元素处于 <code>focus</code> 状态，绑定的 <code>paste</code> 事件就会在复制的时候执行。</p>
<h2 id="事件对象">事件对象</h2>
<pre tabindex="0"><code>        if (window.clipboardData &amp;&amp; window.clipboardData.getData) {
          // IE
          pastedText = window.clipboardData.getData(&#34;Text&#34;);
        } else {
          //e.clipboardData.getData(&#39;text/plain&#39;);
          pastedText = e.originalEvent.clipboardData.getData(&#34;Text&#34;);
        }
</code></pre><p>粘贴事件为你提供了一个 <code>clipboardData</code> 对象, 它实际上是一个 <code>DataTransfer</code> 类型的对象, <code>DataTransfer</code> 是拖动产生的一个对象，但实际上粘贴事件也是它。</p>
<p><code>clipboardData</code> 属性介绍</p>
<table>
<thead>
<tr>
<th>属性</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>dropEffect</td>
<td>String</td>
<td>默认是 none</td>
</tr>
<tr>
<td>effectAllowed</td>
<td>String</td>
<td>默认是 uninitialized</td>
</tr>
<tr>
<td>files</td>
<td>FileList</td>
<td>粘贴操作为空 List</td>
</tr>
<tr>
<td>items</td>
<td>DataTransferItemList</td>
<td>剪切板中的各项数据</td>
</tr>
<tr>
<td>types</td>
<td>Array</td>
<td>剪切板中的数据类型 该属性在 Safari 下比较混乱</td>
</tr>
</tbody>
</table>
<h3 id="items-介绍">items 介绍</h3>
<p><code>items</code> 是一个 <code>DataTransferItemList</code> 对象，自然里面都是 <code>DataTransferItem</code> 类型的数据了。</p>
<h4 id="属性">属性</h4>
<p><code>items</code> 的 <code>DataTransferItem</code> 有两个属性 <code>kind</code> 和 <code>type</code></p>
<table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>kind</td>
<td>一般为 string 或者 file</td>
</tr>
<tr>
<td>type</td>
<td>具体的数据类型，例如具体是哪种类型字符串或者哪种类型的文件，即 MIME-Type</td>
</tr>
</tbody>
</table>
<h4 id="方法">方法</h4>
<table>
<thead>
<tr>
<th>方法</th>
<th>参数</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>getAsFile</td>
<td>空</td>
<td>如果 kind 是 file，可以用该方法获取到文件</td>
</tr>
<tr>
<td>getAsString</td>
<td>回调函数</td>
<td>如果 kind 是 string，可以用该方法获取到字符串，字符串需要用回调函数得到，回调函数的第一个参数就是剪切板中的字符串</td>
</tr>
</tbody>
</table>
<p>在原型上还有一些其他方法，不过在处理剪切板操作的时候一般用不到了。</p>
<p><code>types</code> 介绍
一般 <code>types</code> 中常见的值有 <code>text/plain</code>、<code>text/html</code>、<code>Files</code>。</p>
<table>
<thead>
<tr>
<th>值</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>text/plain</td>
<td>普通字符串</td>
</tr>
<tr>
<td>text/html</td>
<td>带有样式的 html</td>
</tr>
<tr>
<td>Files</td>
<td>文件(例如剪切板中的数据)</td>
</tr>
</tbody>
</table>
<p><strong>一个 Demo</strong></p>
<pre tabindex="0"><code>pasteEle.addEventListener(&#34;paste&#34;, function (e){
    if ( !(e.clipboardData &amp;&amp; e.clipboardData.items) ) {
        return ;
    }

    for (var i = 0, len = e.clipboardData.items.length; i &lt; len; i++) {
        var item = e.clipboardData.items[i];

        if (item.kind === &#34;string&#34;) {
            item.getAsString(function (str) {
                console.log(str)
                // str 是获取到的字符串
            })
        } else if (item.kind === &#34;file&#34;) {
            var pasteFile = item.getAsFile();
            console.log(pasteFile)
            // pasteFile就是获取到的文件
        }
    }
});
</code></pre><p>注意如果是 <code>string</code> 类型的数据，可能针对具体是 <code>text/plain</code>、<code>text/html</code> 进行分别的处理。</p>
</section>

  
  
  <footer class="mt-12 flex flex-wrap">
     
    <a
      class="mr-1.5 mb-1.5 rounded-lg bg-black/[3%] px-5 py-2 no-underline dark:bg-white/[8%]"
      href="https://nanpangyou.github.io/tags/note"
      >note</a
    >
    
  </footer>
  

  
  
  
  <nav class="mt-24 flex rounded-lg bg-black/[3%] text-lg dark:bg-white/[8%]">
    
    <a
      class="flex w-1/2 items-center p-6 pr-3 no-underline"
      href="https://nanpangyou.github.io/post/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%88%87%E6%8D%A2tab/"
      ><span class="mr-1.5">←</span><span>浏览器切换tab</span></a
    >
    
    
    <a
      class="ml-auto flex w-1/2 items-center justify-end p-6 pl-3 no-underline"
      href="https://nanpangyou.github.io/post/arrayapi/"
      ><span>ArrayAPI</span><span class="ml-1.5">→</span></a
    >
    
  </nav>
  

  
  
  <div id="disqus_thread"></div>
  <script>
    const disqusShortname = '男胖友de部落格';
    const script = document.createElement('script');
    script.src = 'https://' + disqusShortname + '.disqus.com/embed.js';
    script.setAttribute('data-timestamp', +new Date());
    document.head.appendChild(script);
  </script>
  
</article>


    </main>

    <footer
  class="opaco mx-auto flex h-[5rem] max-w-3xl items-center px-8 text-[0.9em] opacity-60"
>
  <div class="mr-auto">
    &copy; 2022
    <a class="link" href="https://nanpangyou.github.io/">男胖友de部落格</a>
  </div>
  <a class="link mx-6" href="https://gohugo.io/" rel="noopener" target="_blank"
    >Powered by Hugo️️</a
  >️
  <a
    class="link"
    href="https://github.com/nanxiaobei/hugo-paper"
    rel="noopener"
    target="_blank"
    >▷ Paper 6</a
  >
</footer>

  </body>
</html>
