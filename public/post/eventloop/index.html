<!DOCTYPE html>






























<html
  class="not-ready text-sm lg:text-base"
  style="--bg: #f1efe1"
  lang="en-us"
>
  <head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1, shrink-to-fit=no"
  />

  
  <title>eventloop - ç”·èƒ–å‹deéƒ¨è½æ ¼</title>

  
  <meta name="theme-color" />
  
  <meta name="description" content="Eventloop å…³äºEventloopï¼Œå¤§æ¦‚å¯ä»¥ç†è§£ä¸ºä¸€ç§æ“ä½œç³»ç»Ÿçš„è¿è¡Œæœºåˆ¶ã€‚JSä½¿ç”¨çš„å°±æ˜¯è¿™ç§è¿è¡Œæœºåˆ¶æ¥è§£å†³å•çº¿ç¨‹è¿è¡Œå¸¦æ¥çš„ä¸€äº›é—®é¢˜ã€‚
Wikiçš„å®šä¹‰å¦‚ä¸‹
 &ldquo;Event Loopæ˜¯ä¸€ä¸ªç¨‹åºç»“æ„ï¼Œç”¨äºç­‰å¾…å’Œå‘é€æ¶ˆæ¯å’Œäº‹ä»¶ã€‚ï¼ˆa programming construct that waits for and dispatches events or messages in a program.ï¼‰&rdquo;
 æœ‰å…³Eventloopçš„è¯¦ç»†ä¿¡æ¯ï¼Œå¯ä»¥å‚è€ƒNodeçš„å®˜æ–¹æ–‡æ¡£ã€‚
è¿™é‡Œä¸»è¦æ˜¯å°±å¸¸è§çš„é¢˜ç›®æ¥è¿›è¡Œæ€»ç»“ã€‚
 Eventloopä¸»è¦æœ‰6ä¸ªé˜¶æ®µ
 timers I/O callbacks idle prepare poll check close callbacks  ç‰¢è®°ä»¥ä¸‹çš„ä¸‰ä¸ªä¸åŒé˜¶æ®µ
 timersé˜¶æ®µ pollé˜¶æ®µ checké˜¶æ®µ  ä¸ä¹‹å¯¹åº”çš„æœ‰ä¸‰ä¸ªå¸¸è§çš„API
 setTimeout setImmediate nextTick  å…¶ä¸­ setTimeout ä¼šåœ¨timersé˜¶æ®µæ‰§è¡Œ setImmediate ä¼šåœ¨checké˜¶æ®µæ‰§è¡Œ nextTick ä¼šåœ¨æ¯ä¸ªé˜¶æ®µç»“æŸåç«‹åˆ»æ‰§è¡Œ
ä¸¾ä¸ªğŸŒ°
setImmediate(()=&gt;{ console.log(&#39;setImmediate1&#39;) setTimeout(()=&gt;{ console.log(&#39;setTimeout1&#39;) },0) }) setTimeout(()=&gt;{ console.log(&#39;setTimeout2&#39;) setImmediate(()=&gt;{ console.log(&#39;setImmediate2&#39;) }) },0) åœ¨è¿™ä¸ªğŸŒ°ä¸­ æœ€å¤–å±‚æœ‰ä¸¤ä¸ªå‡½æ•°ï¼Œåˆ†åˆ«ä¸ºsetImmediateå’ŒsetTimeoutã€‚æ¯ä¸ªå‡½æ•°å†…éƒ¨åˆæœ‰ä¸€ä¸ªä¸ä¹‹ä¸åŒçš„å‡½æ•°
  å…ˆæ‰§è¡Œæœ€å¤–å±‚" />
  <meta
    name="author"
    content="nanpangyou"
  />
  

  
  
  
  
  
  
  <link rel="preload stylesheet" as="style" href="https://nanpangyou.github.io/main.min.css" />

  

  
     
  <link rel="preload" as="image" href="https://nanpangyou.github.io/theme.png" />

  
  
  
  <link rel="preload" as="image" href="https://avatars.githubusercontent.com/u/11482364?v=4" />
  
  

  
  <link rel="preload" as="image" href="https://nanpangyou.github.io/github.svg" />
  

  
  <link rel="icon" href="https://nanpangyou.github.io/favicon.ico" />
  <link rel="apple-touch-icon" href="https://nanpangyou.github.io/apple-touch-icon.png" />

  
  <meta name="generator" content="Hugo 0.93.3" />

  
  

  
  
  
  
  
  
  
  
  
  <meta property="og:title" content="eventloop" />
<meta property="og:description" content="Eventloop å…³äºEventloopï¼Œå¤§æ¦‚å¯ä»¥ç†è§£ä¸ºä¸€ç§æ“ä½œç³»ç»Ÿçš„è¿è¡Œæœºåˆ¶ã€‚JSä½¿ç”¨çš„å°±æ˜¯è¿™ç§è¿è¡Œæœºåˆ¶æ¥è§£å†³å•çº¿ç¨‹è¿è¡Œå¸¦æ¥çš„ä¸€äº›é—®é¢˜ã€‚
Wikiçš„å®šä¹‰å¦‚ä¸‹
 &ldquo;Event Loopæ˜¯ä¸€ä¸ªç¨‹åºç»“æ„ï¼Œç”¨äºç­‰å¾…å’Œå‘é€æ¶ˆæ¯å’Œäº‹ä»¶ã€‚ï¼ˆa programming construct that waits for and dispatches events or messages in a program.ï¼‰&rdquo;
 æœ‰å…³Eventloopçš„è¯¦ç»†ä¿¡æ¯ï¼Œå¯ä»¥å‚è€ƒNodeçš„å®˜æ–¹æ–‡æ¡£ã€‚
è¿™é‡Œä¸»è¦æ˜¯å°±å¸¸è§çš„é¢˜ç›®æ¥è¿›è¡Œæ€»ç»“ã€‚
 Eventloopä¸»è¦æœ‰6ä¸ªé˜¶æ®µ
 timers I/O callbacks idle prepare poll check close callbacks  ç‰¢è®°ä»¥ä¸‹çš„ä¸‰ä¸ªä¸åŒé˜¶æ®µ
 timersé˜¶æ®µ pollé˜¶æ®µ checké˜¶æ®µ  ä¸ä¹‹å¯¹åº”çš„æœ‰ä¸‰ä¸ªå¸¸è§çš„API
 setTimeout setImmediate nextTick  å…¶ä¸­ setTimeout ä¼šåœ¨timersé˜¶æ®µæ‰§è¡Œ setImmediate ä¼šåœ¨checké˜¶æ®µæ‰§è¡Œ nextTick ä¼šåœ¨æ¯ä¸ªé˜¶æ®µç»“æŸåç«‹åˆ»æ‰§è¡Œ
ä¸¾ä¸ªğŸŒ°
setImmediate(()=&gt;{ console.log(&#39;setImmediate1&#39;) setTimeout(()=&gt;{ console.log(&#39;setTimeout1&#39;) },0) }) setTimeout(()=&gt;{ console.log(&#39;setTimeout2&#39;) setImmediate(()=&gt;{ console.log(&#39;setImmediate2&#39;) }) },0) åœ¨è¿™ä¸ªğŸŒ°ä¸­ æœ€å¤–å±‚æœ‰ä¸¤ä¸ªå‡½æ•°ï¼Œåˆ†åˆ«ä¸ºsetImmediateå’ŒsetTimeoutã€‚æ¯ä¸ªå‡½æ•°å†…éƒ¨åˆæœ‰ä¸€ä¸ªä¸ä¹‹ä¸åŒçš„å‡½æ•°
  å…ˆæ‰§è¡Œæœ€å¤–å±‚" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://nanpangyou.github.io/post/eventloop/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2020-11-13T02:22:19+00:00" />
<meta property="article:modified_time" content="2020-11-13T02:22:19+00:00" />


  
  <meta itemprop="name" content="eventloop">
<meta itemprop="description" content="Eventloop å…³äºEventloopï¼Œå¤§æ¦‚å¯ä»¥ç†è§£ä¸ºä¸€ç§æ“ä½œç³»ç»Ÿçš„è¿è¡Œæœºåˆ¶ã€‚JSä½¿ç”¨çš„å°±æ˜¯è¿™ç§è¿è¡Œæœºåˆ¶æ¥è§£å†³å•çº¿ç¨‹è¿è¡Œå¸¦æ¥çš„ä¸€äº›é—®é¢˜ã€‚
Wikiçš„å®šä¹‰å¦‚ä¸‹
 &ldquo;Event Loopæ˜¯ä¸€ä¸ªç¨‹åºç»“æ„ï¼Œç”¨äºç­‰å¾…å’Œå‘é€æ¶ˆæ¯å’Œäº‹ä»¶ã€‚ï¼ˆa programming construct that waits for and dispatches events or messages in a program.ï¼‰&rdquo;
 æœ‰å…³Eventloopçš„è¯¦ç»†ä¿¡æ¯ï¼Œå¯ä»¥å‚è€ƒNodeçš„å®˜æ–¹æ–‡æ¡£ã€‚
è¿™é‡Œä¸»è¦æ˜¯å°±å¸¸è§çš„é¢˜ç›®æ¥è¿›è¡Œæ€»ç»“ã€‚
 Eventloopä¸»è¦æœ‰6ä¸ªé˜¶æ®µ
 timers I/O callbacks idle prepare poll check close callbacks  ç‰¢è®°ä»¥ä¸‹çš„ä¸‰ä¸ªä¸åŒé˜¶æ®µ
 timersé˜¶æ®µ pollé˜¶æ®µ checké˜¶æ®µ  ä¸ä¹‹å¯¹åº”çš„æœ‰ä¸‰ä¸ªå¸¸è§çš„API
 setTimeout setImmediate nextTick  å…¶ä¸­ setTimeout ä¼šåœ¨timersé˜¶æ®µæ‰§è¡Œ setImmediate ä¼šåœ¨checké˜¶æ®µæ‰§è¡Œ nextTick ä¼šåœ¨æ¯ä¸ªé˜¶æ®µç»“æŸåç«‹åˆ»æ‰§è¡Œ
ä¸¾ä¸ªğŸŒ°
setImmediate(()=&gt;{ console.log(&#39;setImmediate1&#39;) setTimeout(()=&gt;{ console.log(&#39;setTimeout1&#39;) },0) }) setTimeout(()=&gt;{ console.log(&#39;setTimeout2&#39;) setImmediate(()=&gt;{ console.log(&#39;setImmediate2&#39;) }) },0) åœ¨è¿™ä¸ªğŸŒ°ä¸­ æœ€å¤–å±‚æœ‰ä¸¤ä¸ªå‡½æ•°ï¼Œåˆ†åˆ«ä¸ºsetImmediateå’ŒsetTimeoutã€‚æ¯ä¸ªå‡½æ•°å†…éƒ¨åˆæœ‰ä¸€ä¸ªä¸ä¹‹ä¸åŒçš„å‡½æ•°
  å…ˆæ‰§è¡Œæœ€å¤–å±‚"><meta itemprop="datePublished" content="2020-11-13T02:22:19+00:00" />
<meta itemprop="dateModified" content="2020-11-13T02:22:19+00:00" />
<meta itemprop="wordCount" content="111">
<meta itemprop="keywords" content="" />
  
  <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="eventloop"/>
<meta name="twitter:description" content="Eventloop å…³äºEventloopï¼Œå¤§æ¦‚å¯ä»¥ç†è§£ä¸ºä¸€ç§æ“ä½œç³»ç»Ÿçš„è¿è¡Œæœºåˆ¶ã€‚JSä½¿ç”¨çš„å°±æ˜¯è¿™ç§è¿è¡Œæœºåˆ¶æ¥è§£å†³å•çº¿ç¨‹è¿è¡Œå¸¦æ¥çš„ä¸€äº›é—®é¢˜ã€‚
Wikiçš„å®šä¹‰å¦‚ä¸‹
 &ldquo;Event Loopæ˜¯ä¸€ä¸ªç¨‹åºç»“æ„ï¼Œç”¨äºç­‰å¾…å’Œå‘é€æ¶ˆæ¯å’Œäº‹ä»¶ã€‚ï¼ˆa programming construct that waits for and dispatches events or messages in a program.ï¼‰&rdquo;
 æœ‰å…³Eventloopçš„è¯¦ç»†ä¿¡æ¯ï¼Œå¯ä»¥å‚è€ƒNodeçš„å®˜æ–¹æ–‡æ¡£ã€‚
è¿™é‡Œä¸»è¦æ˜¯å°±å¸¸è§çš„é¢˜ç›®æ¥è¿›è¡Œæ€»ç»“ã€‚
 Eventloopä¸»è¦æœ‰6ä¸ªé˜¶æ®µ
 timers I/O callbacks idle prepare poll check close callbacks  ç‰¢è®°ä»¥ä¸‹çš„ä¸‰ä¸ªä¸åŒé˜¶æ®µ
 timersé˜¶æ®µ pollé˜¶æ®µ checké˜¶æ®µ  ä¸ä¹‹å¯¹åº”çš„æœ‰ä¸‰ä¸ªå¸¸è§çš„API
 setTimeout setImmediate nextTick  å…¶ä¸­ setTimeout ä¼šåœ¨timersé˜¶æ®µæ‰§è¡Œ setImmediate ä¼šåœ¨checké˜¶æ®µæ‰§è¡Œ nextTick ä¼šåœ¨æ¯ä¸ªé˜¶æ®µç»“æŸåç«‹åˆ»æ‰§è¡Œ
ä¸¾ä¸ªğŸŒ°
setImmediate(()=&gt;{ console.log(&#39;setImmediate1&#39;) setTimeout(()=&gt;{ console.log(&#39;setTimeout1&#39;) },0) }) setTimeout(()=&gt;{ console.log(&#39;setTimeout2&#39;) setImmediate(()=&gt;{ console.log(&#39;setImmediate2&#39;) }) },0) åœ¨è¿™ä¸ªğŸŒ°ä¸­ æœ€å¤–å±‚æœ‰ä¸¤ä¸ªå‡½æ•°ï¼Œåˆ†åˆ«ä¸ºsetImmediateå’ŒsetTimeoutã€‚æ¯ä¸ªå‡½æ•°å†…éƒ¨åˆæœ‰ä¸€ä¸ªä¸ä¹‹ä¸åŒçš„å‡½æ•°
  å…ˆæ‰§è¡Œæœ€å¤–å±‚"/>

  
  
</head>

  <body class="text-black duration-200 ease-out dark:text-white">
    <header class="mx-auto flex h-[5rem] max-w-3xl px-8 lg:justify-center">
  <div class="relative z-50 mr-auto flex items-center">
    <a
      class="-translate-x-[1px] -translate-y-0.5 text-3xl font-bold"
      href="https://nanpangyou.github.io/"
      >ç”·èƒ–å‹deéƒ¨è½æ ¼</a
    >
    <a
      class="btn-dark ml-6 h-6 w-6 shrink-0 cursor-pointer [background:url(./theme.svg)_left_center/cover_no-repeat] dark:invert dark:[background-position:right]"
    ></a>
  </div>

  <a
    class="btn-menu relative z-50 -mr-8 flex h-[5rem] w-[5rem] shrink-0 cursor-pointer flex-col items-center justify-center gap-2.5 lg:hidden"
  ></a>

  
  <script>
    
    const htmlClass = document.documentElement.classList;
    setTimeout(() => {
      htmlClass.remove('not-ready');
    }, 10);

    
    const btnMenu = document.querySelector('.btn-menu');
    btnMenu.addEventListener('click', () => {
      htmlClass.toggle('open');
    });

    
    const metaTheme = document.querySelector('meta[name="theme-color"]');
    const lightBg = `"#f1efe1"`.replace(/"/g, '');
    const setDark = (isDark) => {
      metaTheme.setAttribute('content', isDark ? '#000' : lightBg);
      htmlClass[isDark ? 'add' : 'remove']('dark');
      localStorage.setItem('dark', isDark);
    };

    
    const darkScheme = window.matchMedia('(prefers-color-scheme: dark)');
    if (htmlClass.contains('dark')) {
      setDark(true);
    } else {
      const darkVal = localStorage.getItem('dark');
      setDark(darkVal ? darkVal === 'true' : darkScheme.matches);
    }

    
    darkScheme.addEventListener('change', (event) => {
      setDark(event.matches);
    });

    
    const btnDark = document.querySelector('.btn-dark');
    btnDark.addEventListener('click', () => {
      setDark(localStorage.getItem('dark') !== 'true');
    });
  </script>

  <div
    class="nav-wrapper fixed inset-x-0 top-full z-40 flex h-full select-none flex-col justify-center pb-16 duration-200 dark:bg-black lg:static lg:h-auto lg:flex-row lg:!bg-transparent lg:pb-0 lg:transition-none"
  >
    
    

    
    <nav
      class="mt-12 flex justify-center space-x-10 dark:invert lg:mt-0 lg:ml-12 lg:items-center lg:space-x-6"
    >
      
      <a
        class="h-8 w-8 [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6"
        style="--url: url(./github.svg)"
        href=" https://github.com/https://github.com/nanpangyou "
        target="_blank"
      ></a>
      
    </nav>
    
  </div>
</header>


    <main
      class="prose prose-neutral relative mx-auto min-h-[calc(100%-10rem)] max-w-3xl px-8 pt-20 pb-32 dark:prose-invert"
    >
      

<article>
  <header class="mb-20">
    <h1 class="!my-0 pb-2.5">eventloop</h1>

    
    <div class="text-sm opacity-60">
      
      <time>Nov 13, 2020</time>
      
      
      <span class="mx-1">&middot;</span>
      <span>nanpangyou</span>
      
    </div>
    
  </header>

  <section><h1 id="eventloop">Eventloop</h1>
<p>å…³äº<code>Eventloop</code>ï¼Œå¤§æ¦‚å¯ä»¥ç†è§£ä¸ºä¸€ç§æ“ä½œç³»ç»Ÿçš„è¿è¡Œæœºåˆ¶ã€‚JSä½¿ç”¨çš„å°±æ˜¯è¿™ç§è¿è¡Œæœºåˆ¶æ¥è§£å†³å•çº¿ç¨‹è¿è¡Œå¸¦æ¥çš„ä¸€äº›é—®é¢˜ã€‚</p>
<p>Wikiçš„å®šä¹‰å¦‚ä¸‹</p>
<blockquote>
<p>&ldquo;Event Loopæ˜¯ä¸€ä¸ªç¨‹åºç»“æ„ï¼Œç”¨äºç­‰å¾…å’Œå‘é€æ¶ˆæ¯å’Œäº‹ä»¶ã€‚ï¼ˆa programming construct that waits for and dispatches events or messages in a program.ï¼‰&rdquo;</p>
</blockquote>
<p>æœ‰å…³<code>Eventloop</code>çš„è¯¦ç»†ä¿¡æ¯ï¼Œå¯ä»¥å‚è€ƒNodeçš„å®˜æ–¹æ–‡æ¡£ã€‚</p>
<p>è¿™é‡Œä¸»è¦æ˜¯å°±å¸¸è§çš„é¢˜ç›®æ¥è¿›è¡Œæ€»ç»“ã€‚</p>
<hr>
<p>Eventloopä¸»è¦æœ‰6ä¸ªé˜¶æ®µ</p>
<ul>
<li>timers</li>
<li>I/O callbacks</li>
<li>idle prepare</li>
<li>poll</li>
<li>check</li>
<li>close callbacks</li>
</ul>
<p><strong>ç‰¢è®°ä»¥ä¸‹çš„ä¸‰ä¸ªä¸åŒé˜¶æ®µ</strong></p>
<ul>
<li>timersé˜¶æ®µ</li>
<li>pollé˜¶æ®µ</li>
<li>checké˜¶æ®µ</li>
</ul>
<p>ä¸ä¹‹å¯¹åº”çš„æœ‰ä¸‰ä¸ªå¸¸è§çš„API</p>
<ul>
<li>setTimeout</li>
<li>setImmediate</li>
<li>nextTick</li>
</ul>
<p>å…¶ä¸­
setTimeout ä¼šåœ¨timersé˜¶æ®µæ‰§è¡Œ
setImmediate ä¼šåœ¨checké˜¶æ®µæ‰§è¡Œ
nextTick ä¼šåœ¨æ¯ä¸ªé˜¶æ®µç»“æŸåç«‹åˆ»æ‰§è¡Œ</p>
<p>ä¸¾ä¸ªğŸŒ°</p>
<pre tabindex="0"><code>setImmediate(()=&gt;{
    console.log(&#39;setImmediate1&#39;)
    setTimeout(()=&gt;{
        console.log(&#39;setTimeout1&#39;)
    },0)
})

setTimeout(()=&gt;{
    console.log(&#39;setTimeout2&#39;)
    setImmediate(()=&gt;{
        console.log(&#39;setImmediate2&#39;)
    })
},0)
</code></pre><p>åœ¨è¿™ä¸ªğŸŒ°ä¸­
æœ€å¤–å±‚æœ‰ä¸¤ä¸ªå‡½æ•°ï¼Œåˆ†åˆ«ä¸ºsetImmediateå’ŒsetTimeoutã€‚æ¯ä¸ªå‡½æ•°å†…éƒ¨åˆæœ‰ä¸€ä¸ªä¸ä¹‹ä¸åŒçš„å‡½æ•°</p>
<ol>
<li>
<p>å…ˆæ‰§è¡Œæœ€å¤–å±‚</p>
<blockquote>
<p>setImmediateå°†å‡½æ•°ä½“(fn1)å†…éƒ¨çš„éƒ¨åˆ†æ”¾å…¥checké˜¶æ®µã€‚setTimeoutå°†å‡½æ•°ä½“(fn2)å†…éƒ¨çš„éƒ¨åˆ†æ”¾å…¥timersé˜¶æ®µã€‚</p>
</blockquote>
</li>
<li>
<p>eventloopç”±pollé˜¶æ®µæ‰§è¡Œåˆ°checké˜¶æ®µ</p>
<blockquote>
<p>eventloopç”±pollé˜¶æ®µæ‰§è¡Œåˆ°checké˜¶æ®µåå‘ç°fn1ï¼Œæ‰§è¡Œfn1ã€‚å…ˆè¾“å‡º&rsquo;setImmediate1&rsquo;ï¼Œç„¶åæ‰§è¡Œfn1å†…éƒ¨çš„setTimeout(fn3)ï¼Œå°†fn3çš„å‡½æ•°ä½“æ”¾å…¥timersé˜¶æ®µã€‚</p>
</blockquote>
</li>
<li>
<p>eventloopç”±checké˜¶æ®µæ‰§è¡Œåˆ°timersé˜¶æ®µ</p>
<blockquote>
<p>eventloopç”±checké˜¶æ®µæ‰§è¡Œåˆ°timersé˜¶æ®µå‘ç°fn2ï¼Œfn3ã€‚å…ˆæ‰§è¡Œfn2ï¼Œè¾“å‡ºâ€˜setTimeout2â€™ç„¶åå°†fn2å†…éƒ¨çš„setImmediate(fn4)æ”¾å…¥checké˜¶æ®µï¼Œç»§ç»­æ‰§è¡Œfn3ï¼Œè¾“å‡ºâ€˜setTimeout1â€™</p>
</blockquote>
</li>
<li>
<p>eventloopç”±timersé˜¶æ®µæ‰§è¡Œåˆ°pollé˜¶æ®µå†åˆ°checké˜¶æ®µ</p>
<blockquote>
<p>å‘ç°æœ‰fn4ï¼Œæ‰§è¡Œåè¾“å‡º&rsquo;setImmediate2'</p>
</blockquote>
</li>
</ol>
<p>æ‰€ä»¥ç»“æœä¸ºsetImmediate1-&gt;setTimeout2-&gt;setTimeout1-&gt;setImmediate2</p>
<h1 id="æµè§ˆå™¨ä¸­çš„eventloop">æµè§ˆå™¨ä¸­çš„eventloop</h1>
<p>æµè§ˆå™¨ä¸­æ²¡æœ‰setImmediateå’ŒnextTick</p>
<p>ä¸€èˆ¬å°†æµè§ˆå™¨ä¸­çš„è°ƒåº¦åˆ†ä¸º<code>å®ä»»åŠ¡</code>å’Œ<code>å¾®ä»»åŠ¡</code></p>
<p>ä¸€èˆ¬å¯ä»¥è¿™æ ·ç†è§£ã€‚</p>
<p>å®ä»»åŠ¡å°±æ˜¯å¯ä»¥ä¸€ä¼šåšçš„ä»»åŠ¡ï¼Œå¾®ä»»åŠ¡å°±æ˜¯è¦é©¬ä¸Šåšçš„ä»»åŠ¡</p>
<p><strong>å¸¸è§çš„æµè§ˆå™¨å¼‚æ­¥ä¸­ï¼ˆsetTimeoutï¼ŒsetIntervalï¼Œpromiseï¼‰åªæœ‰promise.then(fn)åé¢çš„fnå±äºå¾®ä»»åŠ¡ï¼Œè¦ç«‹é©¬æ‰§è¡Œï¼Œå…¶ä»–å‡ä¸ºå®ä»»åŠ¡</strong></p>
<p>å¦‚æœè§åˆ°awaitï¼Œå¯ä»¥å°†awaitæ”¹å†™ä¸ºpromiseå³å¯åˆ¤æ–­ã€‚</p>
<p>å€¼å¾—æ³¨æ„çš„æ˜¯:<strong>new Promiseï¼ˆfnï¼‰åé¢çš„å‡½æ•°fnæ˜¯ç«‹å³æ‰§è¡Œçš„</strong></p>
<p>ä¸¾ä¸ªğŸŒ°</p>
<pre tabindex="0"><code>async function async1(){
    console.log(1)
    await async2();
    console.log(2)
}

async function async2(){
    console.log(3)
}

async1()

new Promise(function(resolve){
    console.log(4)
    resolve()
}).then(function(){
    console.log(5)
})
</code></pre><p>åœ¨è¿™ä¸ªğŸŒ°ä¸­</p>
<ol>
<li>
<p>å£°æ˜äº†ä¸¤ä¸ªasyncå‡½æ•°ã€‚æ‰§è¡Œasync1</p>
<blockquote>
<p>å…ˆè¾“å‡ºconsole.log(1)ã€‚ç„¶åå°†await async2()ä»¥åŠåé¢çš„éƒ¨åˆ†æ”¹å†™ä¸º async2().then(console.log(2)).è¿™æ—¶å…ˆæ‰§è¡Œasync2å‡½æ•°ï¼Œè¾“å‡ºconsole.log(3).ç„¶åå°†thenåé¢çš„å‡½æ•°æ”¾å…¥å¾®ä»»åŠ¡é˜Ÿåˆ—</p>
</blockquote>
</li>
<li>
<p>ç»§ç»­æ‰§è¡Œåé¢çš„å‡½æ•°</p>
<blockquote>
<p>new Promiseå†…éƒ¨çš„å‡½æ•°ä¼šç«‹å³æ‰§è¡Œã€‚æ‰€ä»¥æ¥ç€è¾“å‡ºconsole.log(4)ï¼Œç„¶åæ‰§è¡Œresolveå›è°ƒã€‚å°†Promiseåé¢çš„thenå‡½æ•°æ”¾å…¥å¾®ä»»åŠ¡é˜Ÿåˆ—</p>
</blockquote>
</li>
<li>
<p>æ£€æŸ¥å¾®ä»»åŠ¡é˜Ÿåˆ—</p>
<blockquote>
<p>æŒ‰ç…§é¡ºåºä¾æ¬¡æ‰§è¡Œã€‚å…ˆè¾“å‡ºconsole.log(2).ç„¶åè¾“å‡ºconsole.log(5)</p>
</blockquote>
</li>
</ol>
<p>æœ€åçš„ç»“æœï¼š1-&gt;3-&gt;4-&gt;2-&gt;5</p>
</section>

  
  

  
  
  
  <nav class="mt-24 flex rounded-lg bg-black/[3%] text-lg dark:bg-white/[8%]">
    
    <a
      class="flex w-1/2 items-center p-6 pr-3 no-underline"
      href="https://nanpangyou.github.io/post/%E8%A6%86%E7%9B%96antdv%E7%9A%84%E9%BB%98%E8%AE%A4%E6%A0%B7%E5%BC%8F/"
      ><span class="mr-1.5">â†</span><span>è¦†ç›–antdvçš„é»˜è®¤æ ·å¼</span></a
    >
    
    
    <a
      class="ml-auto flex w-1/2 items-center justify-end p-6 pl-3 no-underline"
      href="https://nanpangyou.github.io/post/%E5%8A%A8%E6%80%81%E5%88%9B%E5%BB%BAvue%E5%AE%9E%E4%BE%8B/"
      ><span>åŠ¨æ€åˆ›å»ºvueå®ä¾‹</span><span class="ml-1.5">â†’</span></a
    >
    
  </nav>
  

  
  
  <div id="disqus_thread"></div>
  <script>
    const disqusShortname = 'ç”·èƒ–å‹deéƒ¨è½æ ¼';
    const script = document.createElement('script');
    script.src = 'https://' + disqusShortname + '.disqus.com/embed.js';
    script.setAttribute('data-timestamp', +new Date());
    document.head.appendChild(script);
  </script>
  
</article>


    </main>

    <footer
  class="opaco mx-auto flex h-[5rem] max-w-3xl items-center px-8 text-[0.9em] opacity-60"
>
  <div class="mr-auto">
    &copy; 2022
    <a class="link" href="https://nanpangyou.github.io/">ç”·èƒ–å‹deéƒ¨è½æ ¼</a>
  </div>
  <a class="link mx-6" href="https://gohugo.io/" rel="noopener" target="_blank"
    >Powered by Hugoï¸ï¸</a
  >ï¸
  <a
    class="link"
    href="https://github.com/nanxiaobei/hugo-paper"
    rel="noopener"
    target="_blank"
    >â–· Paper 6</a
  >
</footer>

  </body>
</html>
